# ğŸš€ Render.com Configuration - Keren Rabbi Israel
# Full-stack React + Express + Neon PostgreSQL + Builder.io

services:
  # ğŸ“¦ Web Service (Frontend + Backend)
  - type: web
    name: keren-rabbi-israel
    env: node
    region: oregon
    plan: free
    
    # ğŸ”§ Build & Start
    buildCommand: npm install && npm run build
    startCommand: npm run start:prod
    
    # ğŸ“ Root Directory (if needed)
    # rootDir: keren-original-backup
    
    # ğŸŒ Environment Variables
    envVars:
      # Node Configuration
      - key: NODE_VERSION
        value: 20
      - key: NODE_ENV
        value: production
      - key: PORT
        value: 5000
      
      # ğŸ—„ï¸ Database (Neon PostgreSQL)
      - key: DATABASE_URL
        sync: false  # Ã€ configurer manuellement dans Dashboard
        # Format: postgresql://user:password@host/database?sslmode=require
      
      # ğŸ—ï¸ Builder.io CMS (B6)
      - key: PUBLIC_BUILDER_KEY
        value: 64acbf47412843a9a0fbf6f4c8852e80
      
      # ğŸ¨ Optional Services (Ã  configurer si nÃ©cessaire)
      - key: OPENAI_API_KEY
        sync: false
      - key: GEMINI_API_KEY
        sync: false
      - key: STRIPE_SECRET_KEY
        sync: false
      - key: SENDGRID_API_KEY
        sync: false
    
    # â¤ï¸ Health Check
    healthCheckPath: /api/health
    
    # ğŸ”„ Auto-Deploy
    autoDeploy: true
    
    # ğŸ“ Build Settings (auto-detect all changes)
    # buildFilter not needed since we're at project root

# ğŸ“š Documentation
# 
# Pour dÃ©ployer:
# 1. Connecter le repo GitHub Ã  Render
# 2. CrÃ©er un service "Web Service"
# 3. SÃ©lectionner la branche de dÃ©ploiement
# 4. Render dÃ©tectera automatiquement ce fichier
# 5. Ajouter DATABASE_URL dans Environment (Render Dashboard)
# 
# DATABASE_URL:
# CrÃ©er une base Neon sur https://console.neon.tech
# Format: postgresql://[user]:[password]@[host]/[dbname]?sslmode=require
# 
# Builder.io:
# Dashboard: https://builder.io/content
# API Key dÃ©jÃ  configurÃ©e: 64acbf47412843a9a0fbf6f4c8852e80
