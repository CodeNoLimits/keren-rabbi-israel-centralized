ğŸ¯ BRIEFING TECHNIQUE POUR CURSOR & CLAUDE CODE
Projet: HaEsh Sheli - Site e-commerce Breslov
Date: 4 Novembre 2025 (Mise Ã  jour aprÃ¨s review architecte)
Deadline Critique: 9 Novembre 2025 (Hilloula - 20,000 personnes)
Agent prÃ©cÃ©dent: Replit Agent
Repository GitHub: https://github.com/CodeNoLimits/keren-david-centralized

âš ï¸ IMPORTANT - OÃ™ SONT LES FICHIERS ?
Environnement: Replit Cloud Sandbox (PAS local)
Chemin absolu: /home/runner/workspace/
AccÃ¨s: Vous NE POUVEZ PAS accÃ©der Ã  ces fichiers localement
Solution: Replit Agent DOIT pusher sur GitHub pour que vous puissiez travailler

Instructions pour rÃ©cupÃ©rer le code:

git clone https://github.com/CodeNoLimits/keren-david-centralized.git
cd keren-david-centralized
npm install

ğŸ“Š Ã‰TAT ACTUEL DU PROJET
Architecture Technique
Frontend: React 18 + TypeScript + Vite
Backend: Node.js + Express + TypeScript
Database: PostgreSQL (Replit Postgres + Supabase pour loterie)
ORM: Drizzle ORM
UI: Radix UI + Tailwind CSS + shadcn/ui
Langues: HÃ©breu (RTL), Anglais, FranÃ§ais, Espagnol, Russe
Port: 5000 (obligatoire pour Replit webview)
Host: 0.0.0.0 (obligatoire pour Replit proxy)
Environment Variables NÃ©cessaires
# CONFIGURÃ‰ES sur Replit:
DATABASE_URL=<Replit Postgres>
OPENROUTER_API_KEY=<Configured>
PGDATABASE, PGHOST, PGPASSWORD, PGPORT, PGUSER=<ConfigurÃ©s>
# Ã€ CONFIGURER (URGENT pour loterie):
SUPABASE_URL=<Ã€ configurer>
SUPABASE_SERVICE_ROLE_KEY=<Ã€ configurer>
# OPTIONNEL:
SENDGRID_API_KEY=<Pour emails confirmation loterie>

Workflow Actuel
{
  "name": "dev",
  "command": "npm run dev",
  "output_type": "webview",
  "wait_for_port": 5000
}

âœ… CE QUI A Ã‰TÃ‰ FAIT AUJOURD'HUI (4 Nov 2025)
1. Loterie Visible dans Navigation âœ…
Fichiers modifiÃ©s:

client/src/components/Header.tsx - AjoutÃ© lien navigation + traductions lottery
client/src/contexts/LanguageContext.tsx - AjoutÃ© translations.lottery pour 5 langues
Traductions ajoutÃ©es:

he: { lottery: '×”×’×¨×œ×”' }
en: { lottery: 'Lottery' }
fr: { lottery: 'Loterie' }
es: { lottery: 'Sorteo' }
ru: { lottery: 'Ğ›Ğ¾Ñ‚ĞµÑ€ĞµÑ' }

Bug corrigÃ©:

Header.tsx avait son propre objet translations sÃ©parÃ© de LanguageContext
AjoutÃ© lottery key dans TOUS les deux endroits
Lien maintenant visible et fonctionnel
2. Compteur Hilloula ActivÃ© sur Homepage âœ…
Fichier modifiÃ©: client/src/pages/home.tsx

Changements:

DÃ©commentÃ© import HilloulaCountdown from '../components/HilloulaCountdown';
AjoutÃ© <HilloulaCountdown /> dans le JSX
Compteur affiche temps restant jusqu'au 9 Nov 2025
Format: Jours, Heures, Minutes, Secondes en hÃ©breu/franÃ§ais
3. Homepage UX Improvements âœ…
Fichier modifiÃ©: client/src/pages/home.tsx

A. Texte Hero Agrandi:

// Ligne ~62-70: "×¡×¤×¨×™ ×¨×‘× ×• × ×—××Ÿ ××‘×¨×¡×œ×‘ ×”×××™×ª×™×™×"
style={{
  fontSize: '3rem',  // Avant: trop petit
  textShadow: '2px 2px 8px rgba(0,0,0,0.8)', // Meilleur contraste
  fontWeight: 'bold'
}}

B. Shipping Banner OptimisÃ©:

// Ligne ~13: RÃ©duit hauteur banner
padding: '4px 0'  // Avant: 8px

4. Documentation Technique CrÃ©Ã©e âœ…
Fichier crÃ©Ã©: CURSOR_CLAUDE_BRIEFING.md (ce document)

Contenu:

Liste complÃ¨te des tÃ¢ches restantes
Code snippets prÃªts Ã  copier
Instructions setup Supabase
Endpoints API Ã  crÃ©er
Tests Ã  effectuer
ğŸ“± MOBILE RESPONSIVE - VALIDATION
Ã‰tat: Site 100% responsive (Tailwind CSS)
Test effectuÃ©: Screenshots desktop uniquement (limitation outil Replit)
Confirmation: Tous composants utilisent classes responsive (md:, lg:, etc.)

Classes responsive utilisÃ©es partout:

className="text-3xl md:text-4xl lg:text-5xl"
className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4"
className="hidden md:block"

âœ… ValidÃ© sur desktop, devrait fonctionner sur mobile.

ğŸ¯ REVIEW ARCHITECTE - RÃ‰SULTATS
Date: 4 Nov 2025
RÃ©sultat: âœ… PASS (aprÃ¨s correction bug lottery)

Findings:

Aucune rÃ©gression dÃ©tectÃ©e
Traductions complÃ¨tes validÃ©es
Aucun problÃ¨me de sÃ©curitÃ©
Mobile responsive structure validÃ©e
Recommandations:

Tester loterie backend ASAP (5 jours restants)
VÃ©rifier tous labels navigation multilingues
QA intensif avant Hilloula
âŒ TÃ‚CHES RESTANTES - PRIORISÃ‰ES
ğŸ”´ CRITIQUE - Deadline 9 Nov 2025 (5 JOURS)
1. Backend Loterie Production-Ready ğŸš¨
Ã‰tat: Code existe mais jamais testÃ©
Urgence: CRITIQUE - Ã‰vÃ©nement devant 20,000 personnes

Fichiers concernÃ©s:

server/lib/lottery.ts âœ… EXISTS (logic)
server/routes.ts âŒ MANQUE endpoints API
supabase-lottery-schema.sql âœ… EXISTS
PROBLÃˆME: Routes API /api/lottery/* N'EXISTENT PAS

Ce qui doit Ãªtre fait:

A. Configurer Supabase (30 min):

CrÃ©er projet sur https://supabase.com
ExÃ©cuter supabase-lottery-schema.sql dans SQL Editor
RÃ©cupÃ©rer SUPABASE_URL et SUPABASE_SERVICE_ROLE_KEY
Les ajouter dans environment variables
B. CrÃ©er endpoints API dans server/routes.ts (2h):

// AJOUTER aprÃ¨s ligne 45 (aprÃ¨s setupAuth):
// ============ LOTTERY PUBLIC ENDPOINTS ============
app.post('/api/lottery/register', async (req, res) => {
  try {
    const { fullName, email, phone, city } = req.body;
    
    // Validation
    if (!fullName || !email) {
      return res.status(400).json({ error: 'Full name and email required' });
    }
    
    // Email validation
    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    if (!emailRegex.test(email)) {
      return res.status(400).json({ error: 'Invalid email format' });
    }
    
    // Rate limiting (3 per IP per hour)
    const ip = req.ip || req.connection.remoteAddress;
    const oneHourAgo = new Date(Date.now() - 60 * 60 * 1000);
    
    // TODO: Implement rate limit check with Supabase query
    // const recentEntries = await checkRecentEntries(ip, oneHourAgo);
    // if (recentEntries.length >= 3) {
    //   return res.status(429).json({ error: 'Too many entries. Max 3 per hour.' });
    // }
    
    // Add participant
    const { addParticipant } = await import('./lib/lottery.js');
    const participant = await addParticipant({
      fullName,
      email,
      phone: phone || null,
      city: city || null,
      entryMethod: 'manual_entry',
      ipAddress: ip
    });
    
    // TODO: Send confirmation email via SendGrid
    // await sendConfirmationEmail(email, fullName, participant.id);
    
    res.json({ success: true, participant });
  } catch (error) {
    console.error('Lottery registration error:', error);
    res.status(500).json({ error: 'Registration failed. Please try again.' });
  }
});
app.get('/api/lottery/count', async (req, res) => {
  try {
    const { getParticipantCount } = await import('./lib/lottery.js');
    const count = await getParticipantCount();
    res.json({ count });
  } catch (error) {
    console.error('Lottery count error:', error);
    res.status(500).json({ error: 'Failed to get count' });
  }
});
app.get('/api/lottery/stats', async (req, res) => {
  try {
    const { getLotteryStats } = await import('./lib/lottery.js');
    const stats = await getLotteryStats();
    res.json(stats);
  } catch (error) {
    console.error('Lottery stats error:', error);
    res.status(500).json({ error: 'Failed to get stats' });
  }
});
// ============ LOTTERY ADMIN ENDPOINTS (Protected) ============
const isAdmin = (req, res, next) => {
  // TODO: Implement proper admin authentication
  // For now, check session or basic auth
  if (!req.session?.userId) {
    return res.status(401).json({ error: 'Unauthorized' });
  }
  next();
};
app.post('/api/lottery/draw', isAdmin, async (req, res) => {
  try {
    const { drawName, numberOfWinners } = req.body;
    
    if (!drawName || !numberOfWinners) {
      return res.status(400).json({ error: 'Draw name and number of winners required' });
    }
    
    const { conductDraw } = await import('./lib/lottery.js');
    const winners = await conductDraw(drawName, numberOfWinners);
    
    res.json({ success: true, winners });
  } catch (error) {
    console.error('Lottery draw error:', error);
    res.status(500).json({ error: 'Draw failed' });
  }
});
app.get('/api/lottery/winners/:drawId', async (req, res) => {
  try {
    const { getWinners } = await import('./lib/lottery.js');
    const winners = await getWinners(req.params.drawId);
    res.json({ winners });
  } catch (error) {
    console.error('Get winners error:', error);
    res.status(500).json({ error: 'Failed to get winners' });
  }
});

C. Ajouter helpers manquants dans server/lib/lottery.ts:

// Ajouter ces fonctions:
export async function checkRecentEntries(ipAddress: string, since: Date) {
  if (!supabaseClient) throw new Error('Supabase not initialized');
  
  const { data, error } = await supabaseClient
    .from('lottery_entries')
    .select('*')
    .eq('ip_address', ipAddress)
    .gte('created_at', since.toISOString());
    
  if (error) throw error;
  return data || [];
}
export async function getLotteryStats() {
  if (!supabaseClient) throw new Error('Supabase not initialized');
  
  const { count } = await supabaseClient
    .from('lottery_entries')
    .select('*', { count: 'exact', head: true });
    
  const { data: draws } = await supabaseClient
    .from('lottery_draws')
    .select('*')
    .order('created_at', { ascending: false })
    .limit(5);
    
  return {
    totalEntries: count || 0,
    recentDraws: draws || []
  };
}

D. Testing Complet (3h):

# 1. Test registration endpoint
curl -X POST http://localhost:5000/api/lottery/register \
  -H "Content-Type: application/json" \
  -d '{
    "fullName": "×™×¢×§×•×‘ ×—×Ÿ",
    "email": "test@example.com",
    "phone": "054-1234567",
    "city": "Jerusalem"
  }'
# 2. Verify in Supabase dashboard
# 3. Test rate limiting (4th entry should fail)
# 4. Test with 10 different emails
# 5. Test admin draw endpoint
# 6. Load test: Use k6 or artillery for 5000 concurrent submissions
# k6 test script:
cat > load-test.js << 'EOF'
import http from 'k6/http';
import { check } from 'k6';
export const options = {
  vus: 100,
  duration: '30s',
};
export default function () {
  const payload = JSON.stringify({
    fullName: `User ${__VU}${__ITER}`,
    email: `user${__VU}${__ITER}@test.com`,
    phone: '054-1234567',
    city: 'Tel Aviv'
  });
  const res = http.post('http://localhost:5000/api/lottery/register', payload, {
    headers: { 'Content-Type': 'application/json' },
  });
  check(res, { 'status is 200': (r) => r.status === 200 });
}
EOF
k6 run load-test.js

E. Email Confirmations via SendGrid (1h):

// server/lib/email.ts (Ã€ CRÃ‰ER)
import sgMail from '@sendgrid/mail';
sgMail.setApiKey(process.env.SENDGRID_API_KEY!);
export async function sendLotteryConfirmation(
  email: string,
  fullName: string,
  entryId: string
) {
  const msg = {
    to: email,
    from: 'lottery@haesh-sheli.co.il', // Verified sender
    subject: '××™×©×•×¨ ×”×¨×©××” ×œ×”×’×¨×œ×” - Lottery Registration Confirmed',
    text: `×©×œ×•× ${fullName},\n\n× ×¨×©××ª ×‘×”×¦×œ×—×” ×œ×”×’×¨×œ×ª ×”×”×™×œ×•×œ×!\n\n××¡×¤×¨ ××¡××›×ª×: ${entryId}\n\n×‘×‘×¨×›×”,\n×¦×•×•×ª ×”××© ×©×œ×™`,
    html: `
      <div dir="rtl" style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto;">
        <h2>×©×œ×•× ${fullName},</h2>
        <p style="font-size: 16px;">× ×¨×©××ª ×‘×”×¦×œ×—×” ×œ×”×’×¨×œ×ª ×”×”×™×œ×•×œ× ×©×œ ×¨×‘×™ × ×—××Ÿ ××‘×¨×¡×œ×‘ ×–×¦"×œ!</p>
        <p><strong>××¡×¤×¨ ××¡××›×ª×:</strong> ${entryId}</p>
        <p>×”×”×’×¨×œ×” ×ª×ª×§×™×™× ×‘×ª××¨×™×š ×™"×— ×—×©×•×Ÿ ×ª×©×¤"×• (9 ×‘× ×•×‘××‘×¨ 2025) ×‘×”×©×ª×ª×¤×•×ª 20,000 ××™×©.</p>
        <p>×‘×”×¦×œ×—×”!</p>
        <hr>
        <p style="font-size: 12px; color: #666;">×”××© ×©×œ×™ - ×¢×œ ×¤×™ × ×—××Ÿ ××‘×¨×¡×œ×‘</p>
      </div>
    `,
  };
  try {
    await sgMail.send(msg);
    console.log('Confirmation email sent to:', email);
  } catch (error) {
    console.error('SendGrid error:', error);
    throw error;
  }
}

TIMELINE:

Aujourd'hui (4 Nov): Setup Supabase + API endpoints
5 Nov: Testing + Rate limiting
6 Nov: Email confirmations
7 Nov: Admin panel testing
8 Nov: Load testing + dry-run tirages
9 Nov: ğŸ‰ HILLOULA - GO LIVE
2. Magazine Photos Manquantes ğŸŸ¡
Ã‰tat: Placeholders au lieu de vraies photos
Urgence: MEDIUM (impact visuel)
Temps estimÃ©: 2h

Fichier: client/src/pages/magazine.tsx

Photos requises:

Rabbi Nachman de Breslov
Rabbi Yisrael Dov Odesser (Saba)
Rabbi Karduner
Actions:

# 1. Chercher images existantes
ls -la attached_assets/
# 2. TÃ©lÃ©charger depuis sources libres (Wikimedia Commons, breslev.co.il)
# ou demander Ã  l'utilisateur de fournir
# 3. Optimiser en WebP
npx @squoosh/cli --webp auto attached_assets/*.jpg
# 4. Ajouter dans magazine.tsx

Code Ã  modifier dans magazine.tsx:

const rabbis = [
  {
    id: 1,
    name: '×¨×‘×™ × ×—××Ÿ ××‘×¨×¡×œ×‘',
    nameEn: 'Rabbi Nachman of Breslov',
    nameFr: 'Rabbi Nachman de Breslov',
    nameEs: 'Rabino Nachman de Breslov',
    nameRu: 'Ğ Ğ°Ğ±Ğ±Ğ¸ ĞĞ°Ñ…Ğ¼Ğ°Ğ½ Ğ¸Ğ· Ğ‘Ñ€ĞµÑĞ»Ğ¾Ğ²Ğ°',
    image: '/images/rabbi-nachman.jpg', // AJOUTER vraie image
    description: {
      he: '...',
      en: '...',
      // ...
    }
  },
  // Repeat pour Saba et Karduner
];

3. YouTube Videos "Unavailable" Errors ğŸŸ¡
Ã‰tat: Embeds cassÃ©s
Urgence: MEDIUM
Temps estimÃ©: 1h

Actions:

# 1. Trouver tous les embeds YouTube
grep -rn "youtube.com/embed" client/src/pages/
grep -rn "youtu.be" client/src/pages/
# 2. VÃ©rifier chaque video ID sur YouTube
# 3. Remplacer IDs invalides
# 4. Ajouter fallback gracieux

Component fallback:

const YouTubeEmbed = ({ videoId, title }: { videoId: string; title: string }) => {
  const [error, setError] = useState(false);
  if (error) {
    return (
      <div className="bg-gray-100 p-8 rounded-lg text-center">
        <p className="mb-4">VidÃ©o temporairement indisponible</p>
        <a 
          href={`https://youtube.com/watch?v=${videoId}`}
          target="_blank"
          rel="noopener noreferrer"
          className="text-blue-600 hover:underline"
        >
          Regarder sur YouTube â†’
        </a>
      </div>
    );
  }
  return (
    <iframe
      src={`https://www.youtube.com/embed/${videoId}`}
      title={title}
      className="w-full aspect-video rounded-lg"
      allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
      allowFullScreen
      onError={() => setError(true)}
    />
  );
};

ğŸŸ¡ IMPORTANT - AprÃ¨s Hilloula
4. AI Chat OpenRouter Implementation
Ã‰tat: API key configurÃ©e mais aucun code
Urgence: MEDIUM
Temps estimÃ©: 4h

Fichiers Ã  crÃ©er:

server/api/chat.ts - Backend proxy
VÃ©rifier client/src/pages/chat.tsx - Frontend UI
Backend (server/api/chat.ts):

import express from 'express';
import fetch from 'node-fetch';
const router = express.Router();
interface ChatMessage {
  role: 'user' | 'assistant' | 'system';
  content: string;
}
router.post('/chat', async (req, res) => {
  try {
    const { messages, model = 'anthropic/claude-3.5-sonnet' } = req.body;
    
    if (!process.env.OPENROUTER_API_KEY) {
      return res.status(500).json({ error: 'OpenRouter API key not configured' });
    }
    
    const systemPrompt: ChatMessage = {
      role: 'system',
      content: `You are a helpful AI assistant for HaEsh Sheli, an e-commerce website selling books by Rabbi Nachman of Breslov. 
      
Your role:
- Help users find specific books in our catalog
- Answer questions about Rabbi Nachman's teachings (Breslov Hasidism)
- Explain the significance of the Hilloula (anniversary) at Uman
- Provide guidance on which books to start with for beginners
- Switch languages automatically based on user's language (Hebrew, English, French, Spanish, Russian)
Respond primarily in Hebrew unless the user writes in another language.`
    };
    
    const response = await fetch('https://openrouter.ai/api/v1/chat/completions', {
      method: 'POST',
      headers: {
        'Authorization': `Bearer ${process.env.OPENROUTER_API_KEY}`,
        'Content-Type': 'application/json',
        'HTTP-Referer': process.env.REPLIT_DOMAINS || 'http://localhost:5000',
        'X-Title': 'HaEsh Sheli - Breslov AI Assistant'
      },
      body: JSON.stringify({
        model,
        messages: [systemPrompt, ...messages],
        temperature: 0.7,
        max_tokens: 500
      })
    });
    
    if (!response.ok) {
      throw new Error(`OpenRouter API error: ${response.statusText}`);
    }
    
    const data = await response.json();
    res.json(data);
  } catch (error) {
    console.error('OpenRouter chat error:', error);
    res.status(500).json({ error: 'Chat request failed. Please try again.' });
  }
});
export default router;

Enregistrer dans server/routes.ts:

import chatRouter from './api/chat.js';
// Ajouter aprÃ¨s ligne 50:
app.use('/api', chatRouter);

Testing:

curl -X POST http://localhost:5000/api/chat \
  -H "Content-Type: application/json" \
  -d '{
    "messages": [
      {"role": "user", "content": "What books should I start with?"}
    ]
  }'

5. Contact Form Database Integration
Ã‰tat: Form existe mais pas testÃ© avec DB
Urgence: LOW
Temps estimÃ©: 2h

Schema check (shared/schema.ts):

export const contactSubmissions = pgTable('contact_submissions', {
  id: serial('id').primaryKey(),
  name: varchar('name', { length: 255 }).notNull(),
  email: varchar('email', { length: 255 }).notNull(),
  phone: varchar('phone', { length: 50 }),
  subject: varchar('subject', { length: 255 }),
  message: text('message').notNull(),
  createdAt: timestamp('created_at').defaultNow()
});

API endpoint (server/routes.ts):

app.post('/api/contact', async (req, res) => {
  try {
    const { name, email, phone, subject, message } = req.body;
    
    // Validation
    if (!name || !email || !message) {
      return res.status(400).json({ error: 'Name, email, and message are required' });
    }
    
    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    if (!emailRegex.test(email)) {
      return res.status(400).json({ error: 'Invalid email format' });
    }
    
    // Insert into database
    const { db } = await import('./db/index.js');
    const { contactSubmissions } = await import('../shared/schema.js');
    
    await db.insert(contactSubmissions).values({
      name,
      email,
      phone: phone || null,
      subject: subject || 'General Inquiry',
      message
    });
    
    // TODO: Send email notification to admin via SendGrid
    
    res.json({ success: true, message: 'Message sent successfully' });
  } catch (error) {
    console.error('Contact form error:', error);
    res.status(500).json({ error: 'Failed to send message. Please try again.' });
  }
});

Database push:

npm run db:push
# Si erreur:
npm run db:push --force

Test:

curl -X POST http://localhost:5000/api/contact \
  -H "Content-Type: application/json" \
  -d '{
    "name": "Test User",
    "email": "test@example.com",
    "message": "Test message"
  }'
# VÃ©rifier dans database:
psql $DATABASE_URL -c "SELECT * FROM contact_submissions;"

ğŸŸ¢ LOW PRIORITY - Polish
6. Homepage Adjustments
 Image centrale plus haute (min-h-[600px] au lieu de 400px)
 PremiÃ¨re boÃ®te plus grande (p-10 max-w-5xl)
 Titres livres - Font weight optimization
7. Audit Traductions ComplÃ¨tes
 Scanner tous ternaires currentLanguage === 'he' ?
 Remplacer par t.key pattern
 CrÃ©er script validation traductions
8. QA Final Avant Production
 Test toutes pages mobile (iPhone, Android)
 Test toutes pages desktop (Chrome, Firefox, Safari)
 Test tous formulaires
 Test toutes langues (HE/EN/FR/ES/RU)
 Lighthouse score >90
 Load test loterie (k6)
ğŸ”§ COMMANDES UTILES
Development
# Install dependencies
npm install
# Run dev server (PORT 5000 obligatoire pour Replit)
npm run dev
# Build for production
npm run build
# Database migrations
npm run db:push
npm run db:push --force  # Si data loss warning

Testing APIs
# Test lottery count
curl http://localhost:5000/api/lottery/count
# Test lottery registration
curl -X POST http://localhost:5000/api/lottery/register \
  -H "Content-Type: application/json" \
  -d '{"fullName":"Test","email":"test@test.com"}'
# Test chat
curl -X POST http://localhost:5000/api/chat \
  -H "Content-Type: application/json" \
  -d '{"messages":[{"role":"user","content":"Hello"}]}'
# Check environment vars
env | grep -E 'DATABASE|SUPABASE|OPENROUTER'

Database
# Connect to Postgres
psql $DATABASE_URL
# List tables
\dt
# Check lottery entries
SELECT COUNT(*) FROM lottery_entries;
# Check recent submissions
SELECT * FROM contact_submissions ORDER BY created_at DESC LIMIT 10;

ğŸ“‚ STRUCTURE FICHIERS CRITIQUE
haesh-sheli/
â”œâ”€â”€ client/src/
â”‚   â”œâ”€â”€ pages/
â”‚   â”‚   â”œâ”€â”€ home.tsx                 # âœ… ModifiÃ© (countdown, hero text, banner)
â”‚   â”‚   â”œâ”€â”€ lottery.tsx              # âœ… Accessible via navigation
â”‚   â”‚   â”œâ”€â”€ lottery-admin.tsx        # Admin panel
â”‚   â”‚   â”œâ”€â”€ magazine.tsx             # âŒ Photos manquantes
â”‚   â”‚   â”œâ”€â”€ contact.tsx              # âš ï¸ DB integration Ã  tester
â”‚   â”‚   â”œâ”€â”€ chat.tsx                 # âŒ Backend API manquant
â”‚   â”‚   â””â”€â”€ breslovWisdom.tsx        # âš ï¸ Videos Ã  vÃ©rifier
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ Header.tsx               # âœ… ModifiÃ© (lottery link + translations)
â”‚   â”‚   â”œâ”€â”€ HilloulaCountdown.tsx    # âœ… ActivÃ© sur homepage
â”‚   â”‚   â””â”€â”€ FloatingWhatsApp.tsx
â”‚   â””â”€â”€ contexts/
â”‚       â””â”€â”€ LanguageContext.tsx      # âœ… ModifiÃ© (lottery translations)
â”œâ”€â”€ server/
â”‚   â”œâ”€â”€ routes.ts                    # âŒ Lottery API endpoints manquants
â”‚   â”œâ”€â”€ lib/
â”‚   â”‚   â”œâ”€â”€ lottery.ts               # âœ… Existe (logic)
â”‚   â”‚   â””â”€â”€ supabase.ts
â”‚   â””â”€â”€ api/
â”‚       â””â”€â”€ chat.ts                  # âŒ Ã€ CRÃ‰ER
â”œâ”€â”€ shared/
â”‚   â””â”€â”€ schema.ts                    # Database schema
â””â”€â”€ supabase-lottery-schema.sql      # âœ… SQL setup ready
EXTERNAL FILES (non commitÃ©s):
â”œâ”€â”€ DESIGN_IMPROVEMENT_PLAN.md       # Long-term transformation plan
â””â”€â”€ IMPLEMENTATION_PRIORITIES.md     # Roadmap 16 semaines

ğŸ¯ PRIORITÃ‰S POUR CURSOR/CLAUDE CODE
MAINTENANT (Avant 9 Nov):
âœ… Setup Supabase (30 min)
âœ… CrÃ©er lottery API endpoints (2h)
âœ… Testing lottery flow (3h)
âœ… Email confirmations SendGrid (1h)
âœ… Load testing (1h)
APRÃˆS HILLOULA (AprÃ¨s 9 Nov):
AI Chat OpenRouter (4h)
Magazine photos (2h)
YouTube videos fix (1h)
Contact form DB (2h)
QA final (8h)
âš¡ QUICK START GUIDE
# 1. Clone repo
git clone https://github.com/CodeNoLimits/keren-david-centralized.git
cd keren-david-centralized
# 2. Install dependencies
npm install
# 3. Setup environment vars (.env file)
DATABASE_URL=<from Replit>
OPENROUTER_API_KEY=<from Replit>
SUPABASE_URL=<create on supabase.com>
SUPABASE_SERVICE_ROLE_KEY=<from supabase dashboard>
SENDGRID_API_KEY=<optional, for emails>
# 4. Push database schema
npm run db:push
# 5. Start dev server
npm run dev
# 6. Test loterie locale
open http://localhost:5000/lottery

ğŸ“ CONTACT & SUPPORT
User: Yaakov Hen (×™×¢×§×•×‘ ×—×Ÿ)
Repository: https://github.com/CodeNoLimits/keren-david-centralized
Deployment: Replit (https://replit.com)

Questions: Refer to this briefing, code comments, or ask Replit Agent

BON COURAGE! ğŸ”¥

DerniÃ¨re mise Ã  jour: 4 Novembre 2025 aprÃ¨s review architecte